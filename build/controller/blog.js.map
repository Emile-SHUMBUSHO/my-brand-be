{"version":3,"file":"blog.js","names":["createBlog","req","res","console","log","response","cloudinary","uploader","upload","file","path","then","data","blog","Blog","title","body","description","blogBody","blogImage","url","save","error","status","SERVER_ERROR","json","err","allBlogs","find","blogs","singleBlog","findById","params","id","send","updateBlog","blogData","findByIdAndUpdate","deleteBlog","findByIdAndRemove"],"sources":["../../src/controller/blog.js"],"sourcesContent":["import Blog from \"../database/models/blog\";\r\nimport status from \"../config/status\";\r\nimport cloudinary from \"../middlewares/cloudinary\";\r\n\r\nexport const createBlog = async (req, res) => {\r\n  console.log(\"welcome to create blog\");\r\n  const response = cloudinary.uploader.upload(req.file.path);\r\n  response\r\n    .then((data) => {\r\n      const blog = new Blog({\r\n        title: req.body.title,\r\n        description: req.body.description,\r\n        blogBody: req.body.blogBody,\r\n        blogImage: data.url,\r\n      });\r\n      //Save blog to database\r\n      blog.save((error) => {\r\n        if (error) {\r\n          res.status(status.SERVER_ERROR).json(error);\r\n        }\r\n        res.json(blog);\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      return res.status(status.SERVER_ERROR).json(err);\r\n    });\r\n};\r\n\r\nexport const allBlogs = (req, res) => {\r\n  try {\r\n    Blog.find((error, blogs) => {\r\n      if (error) {\r\n        res.status(status.SERVER_ERROR).json(error);\r\n      } else {\r\n        res.json(blogs);\r\n      }\r\n    });\r\n  } catch (error) {\r\n    return res.status(status.SERVER_ERROR).json(error);\r\n  }\r\n};\r\n\r\nexport const singleBlog = (req, res) => {\r\n  try {\r\n    Blog.findById(req.params.id, (error, blog) => {\r\n      if (error) res.send(error);\r\n      res.json(blog);\r\n    });\r\n  } catch {}\r\n};\r\n\r\nexport const updateBlog = (req, res) => {\r\n  const response = cloudinary.uploader.upload(req.file.path);\r\n  response.then((blogData) => {\r\n    Blog.findByIdAndUpdate(\r\n      req.params.id,\r\n      {\r\n        title: req.body.title,\r\n        description: req.body.description,\r\n        blogBody: req.body.blogBody,\r\n        blogImage: blogData.url,\r\n      },\r\n      (error, blog) => {\r\n        if (error) res.send(error);\r\n        res.json(blog);\r\n      }\r\n    );\r\n  });\r\n};\r\n\r\nexport const deleteBlog = (req, res) => {\r\n  try {\r\n    Blog.findByIdAndRemove(req.params.id, (error, blog) => {\r\n      if (error) res.send(error);\r\n      res.json(blog);\r\n    });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n"],"mappings":"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"}