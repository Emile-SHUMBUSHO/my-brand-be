{"version":3,"file":"validateMessage.js","names":["messageSchema","Joi","object","name","string","min","max","required","email","pattern","RegExp","message","exports","validateMessage","req","res","next","validate","body","error","value","errorMsg","details","path","status","send"],"sources":["../../src/middlewares/validateMessage.js"],"sourcesContent":["import Joi from \"joi\";\r\n\r\nconst messageSchema = Joi.object({\r\n  name: Joi.string().min(2).max(30).required(),\r\n  email: Joi.string().pattern(\r\n    new RegExp(\r\n      /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/\r\n    )\r\n  ),\r\n  message: Joi.string().min(10).max(300).required(),\r\n});\r\n\r\nexports.validateMessage = (req, res, next) => {\r\n  const { error, value } = messageSchema.validate(req.body);\r\n  if (error) {\r\n    let errorMsg;\r\n    if (error.details[0].path[0] === \"email\") {\r\n      errorMsg = `Invalid email address`;\r\n    } else {\r\n      errorMsg = error.details[0].message;\r\n    }\r\n    return res.status(400).send({ error: errorMsg });\r\n  }\r\n  next();\r\n};\r\n"],"mappings":";;AAAA;AAAsB;AAEtB,IAAMA,aAAa,GAAGC,eAAG,CAACC,MAAM,CAAC;EAC/BC,IAAI,EAAEF,eAAG,CAACG,MAAM,EAAE,CAACC,GAAG,CAAC,CAAC,CAAC,CAACC,GAAG,CAAC,EAAE,CAAC,CAACC,QAAQ,EAAE;EAC5CC,KAAK,EAAEP,eAAG,CAACG,MAAM,EAAE,CAACK,OAAO,CACzB,IAAIC,MAAM,CACR,sIAAsI,CACvI,CACF;EACDC,OAAO,EAAEV,eAAG,CAACG,MAAM,EAAE,CAACC,GAAG,CAAC,EAAE,CAAC,CAACC,GAAG,CAAC,GAAG,CAAC,CAACC,QAAQ;AACjD,CAAC,CAAC;AAEFK,OAAO,CAACC,eAAe,GAAG,UAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAK;EAC5C,4BAAyBhB,aAAa,CAACiB,QAAQ,CAACH,GAAG,CAACI,IAAI,CAAC;IAAjDC,KAAK,yBAALA,KAAK;IAAEC,KAAK,yBAALA,KAAK;EACpB,IAAID,KAAK,EAAE;IACT,IAAIE,QAAQ;IACZ,IAAIF,KAAK,CAACG,OAAO,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,KAAK,OAAO,EAAE;MACxCF,QAAQ,0BAA0B;IACpC,CAAC,MAAM;MACLA,QAAQ,GAAGF,KAAK,CAACG,OAAO,CAAC,CAAC,CAAC,CAACX,OAAO;IACrC;IACA,OAAOI,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEN,KAAK,EAAEE;IAAS,CAAC,CAAC;EAClD;EACAL,IAAI,EAAE;AACR,CAAC"}